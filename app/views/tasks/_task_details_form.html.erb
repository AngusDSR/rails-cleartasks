<div class="update-task">
    <%= simple_form_for task, html: { class: 'form-horizontal' }, wrapper: :horizontal_form, defaults: { input_html: { class: "note-details" }, label: false } do |f| %>
      <div class="row mb-0">
        <div class="col-md-6">
          <%= f.input :name, required: true,  placeholder: "Task name: I have to...", grid_wrapper_html: { class: "flex-grow-1" } %>
        </div>
        <div class="col-md-3">
          <%= f.input :reason, required: true,  placeholder: 'Because/in time for...', grid_wrapper_html: { class: "flex-grow-1" } %>
        </div>
        <div class="col-md-3">
          <%= f.input :due_date, html5: true, min: Date.today.to_s, input_html: { class: 'note-details' } %>
        </div>
      </div>
      <div class="row my-2">
        <div class="col-md-6" data-controller="importance">
          <label class="integer optional form-label text-light mt-1 mb-0 p-0" for="task_importance">
            Importance: <span data-importance-target="span"></span>
          </label>
          <%= f.input :importance, as: :range, input_html: { data: { action: "input->importance#changeImportance", "importance-target": "slider" }, min: '0', max: '5' } %>
          <%= f.input :content, input_html: { rows: 5 }, grid_wrapper_html: { class: "flex-grow-1 mb-2" } %>
        </div>
        <div class="col-md-6">
          <div>
            <%= render "new_subtask", {task:task} %>
            <% task.subtasks.each do |st| %>
              <div class="sub-task-item">
                <p class="new-subtask-text"><%= st.content %></p>
                <div class="flex-grow-1"></div>
                <%= link_to task_subtask_path(task, st), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: "me-2" do %>
                  <i class="fa-solid fa-square-xmark text-danger fs-4"></i>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
      <div class="d-flex flex-row-reverse">
         <%= button_tag(type: 'submit', class: "btn btn-sm btn-light me-2") do %>
          <%# Save %>
          <i class="fa-solid fa-floppy-disk"></i>
        <% end %>
        <%# TO DO: summary modal %>
        <%= link_to task_path(task), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class:"btn btn-sm btn-danger me-2" do %>
            <%# Delete note %>
            <i class="fa-regular fa-trash-can"></i>
        <% end %>
        <button class="btn btn-sm btn-light me-2 btn-close-task-update">
          <i class="fa-solid fa-chevron-up"></i>
        </button>
      </div>
    <% end %>
    <hr>
  </div>
